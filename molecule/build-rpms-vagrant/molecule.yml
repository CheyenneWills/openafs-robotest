---
dependency:
  name: galaxy
driver:
  name: vagrant
platforms:
  - name: m-builder02
    box: generic/centos7
    memory: 2048
    cpus: 4
    groups:
      - rpm_builders
provisioner:
  name: ansible
  playbooks:
    cleanup: ../../playbooks/cleanup-build.yml
    converge: ../../playbooks/build.yml
    prepare: "${MOLECULE_PREPARE_PLAYBOOK-../../playbooks/prepare.yml}"
    verify: ../../playbooks/verify-build.yml
  inventory:
    host_vars:
      m-builder02:
        sysname: amd64_linux26
        dist: el7
        arch: x86_64
    group_vars:
      rpm_builders:
        ref: "${OPENAFS_REF-master}"
        repo: "${OPENAFS_REPO-https://github.com/openafs/openafs.git}"
        builddir: ~/openafs
verifier:
  name: ansible
scenario:
  test_sequence:
    - cleanup
    - destroy
    - create
    - prepare
    - converge
    - verify
    - cleanup
    - destroy
  create_sequence:
    - create
    - prepare
  converge_sequence:
    - create
    - prepare
    - converge
  check_sequence:
    - verify
  destroy_sequence:
    - cleanup
    - destroy
